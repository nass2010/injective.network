import{_ as pt,a as jt}from"./NumericInput.vue.aa13647e.js";import{_ as Nt}from"./DotStatus.vue.d6eac5c5.js";import{_ as _t}from"./TableHeader.vue.efcee495.js";import{_ as Ft}from"./TokenIcon.vue.138e43fd.js";import{_ as ft,a as ht}from"./TableBody.vue.d7c633b3.js";import{u as G,S as Et,U as j,Z as V,a as X,N as ot,b as gt,I as Rt,c as xt,d as yt,M as tt,T as bt,e as vt,A as E,f as qt,g as Dt}from"./entry.d056f6df.js";import{br as C,bs as s,dN as Y,B as M,dr as m,ds as A,dt as x,dH as t,dI as a,dp as N,dO as $,bm as e,ao as T,dG as y,c3 as g,c1 as st,dP as at,dQ as Ht,du as W,dv as Q,dR as it,dS as rt,dJ as H,dK as ct,bh as J,dT as Ot,dU as et,dV as $t,dW as ut,dX as Lt,c6 as Vt,bw as kt,bj as lt,dY as nt,dZ as dt,c0 as Bt,bn as Ut,d_ as Wt,d$ as Jt,e0 as Gt,e1 as Kt,bS as At,dd as Zt,e2 as Yt}from"./injective.5ec62b21.js";import{_ as It}from"./Card.vue.54e49112.js";import{u as O}from"./auction.298ac3db.js";import{c as L,a as zt,f as Qt}from"./helpers.25b13d39.js";import{a as Xt,f as z}from"./index.b0248242.js";import{t as St}from"./index.00c12b3f.js";import{r as wt}from"./index.379cfe5b.js";import{_ as K}from"./Button.vue.042b9f8c.js";import{g as te}from"./currency.3c5184cf.js";import{_ as ee}from"./Progress.480919ef.js";import{_ as Ct}from"./HocLoading.vue.2c565178.js";import"./axelar.f734343d.js";import{d as ne}from"./index.1ac1b5bb.js";import{f as oe}from"./index.13982607.js";import{_ as se}from"./Modal.vue.62282f1c.js";import"./formatter.d4ed8883.js";import"./injective-wallet.1bcffa89.js";import"./injective-bridge.07091654.js";import"./StreamProvider.04db0d1c.js";import"./index.213bb253.js";import"./index.76ce090a.js";const ae={class:"col-span-1 text-left font-mono xl:hidden"},ie={class:"col-span-1 text-right xl:col-span-3 xl:text-left"},re={class:"flex items-center justify-end xl:justify-start"},ce={class:"font-sm tracking-1 font-bold"},ue={class:"col-span-1 text-left font-mono xl:hidden"},le={class:"tracking-0.4 col-span-1 text-right font-mono xl:col-span-3 xl:text-left"},de={class:"col-span-1 text-left font-mono xl:hidden"},me={class:"col-span-1 text-right font-mono xl:col-span-6"},pe={class:"flex flex-col justify-center"},_e={class:"text-gray-950 tracking-0.4 dark:text-gray-200"},fe={class:"text-2xs tracking-0.4 ml-4 uppercase leading-3 text-gray-400 dark:text-gray-500"},he=C({__name:"BasketRow",props:{basketCoin:{required:!0,type:Object}},setup(r){const n=r,o=G(),i=s(()=>n.basketCoin.amount?new M(n.basketCoin.amount).toBase(n.basketCoin.token.decimals):Y),c=s(()=>i.value.eq(0)?"0.0":i.value.toFormat(Et.includes(n.basketCoin.token.symbol)?0:j)),d=s(()=>n.basketCoin.amountInInj?new M(n.basketCoin.amountInInj).toBase(n.basketCoin.token.decimals):Y),u=s(()=>d.value.eq(0)?"0":d.value.toFormat(j)),p=s(()=>n.basketCoin.amountInCurrency?new M(n.basketCoin.amountInCurrency).toBase(n.basketCoin.token.decimals):Y),h=s(()=>p.value.eq(0)?`${o.currency.symbol}0`:`${o.currency.symbol}${p.value.toFormat(j)}`);return(_,f)=>{const k=Ft,B=ft;return m(),A(B,null,{default:x(()=>[t("span",ae,a(_.$t("auction.basket.token")),1),t("span",ie,[t("div",re,[r.basketCoin?(m(),A(k,N({key:0},{token:r.basketCoin.token},{class:"mr-3"}),null,16)):$("",!0),t("span",ce,a(r.basketCoin.token.symbol),1)])]),t("span",ue,a(_.$t("auction.basket.amount")),1),t("span",le,a(e(c)),1),t("span",de,a(_.$t("auction.basket.estValue")),1),t("span",me,[t("div",pe,[t("span",_e,a(e(u))+" INJ ",1),t("span",fe,a(e(h))+" "+a(e(o).currency.code),1)])])]),_:1})}}}),ge={class:"grow"},xe={class:"flex h-full flex-col overflow-y-hidden rounded-2xl"},ye={class:"col-span-3"},be={class:"col-span-3"},ve={class:"col-span-6 text-right"},$e={key:0},ke={class:"col-span-1 text-center font-semibold xl:col-span-5"},Be=C({__name:"Basket",props:{rollover:Boolean,basketCoins:{type:Array,required:!0}},setup(r){const n=r,o=s(()=>[...n.basketCoins].sort((i,c)=>{const d=i.amountInInj,u=c.amountInInj;return new T(u).minus(d).toNumber()}));return(i,c)=>{const d=_t,u=he,p=ht;return m(),y("div",ge,[t("div",xe,[g(d,{"is-dense":""},{default:x(()=>[t("span",ye,a(i.$t("auction.basket.token")),1),t("span",be,a(i.$t("auction.basket.amount")),1),t("span",ve,a(i.$t("auction.basket.estValue")),1)]),_:1}),g(p,N({"is-dense":"",class:{"flex flex-col grow":e(o).length===0||r.rollover}},{isEmpty:e(o).length===0||r.rollover}),{empty:x(()=>[t("span",ke,a(r.rollover?i.$t("auction.basket.rollover"):i.$t("auction.basket.empty")),1)]),default:x(()=>[r.rollover?$("",!0):(m(),y("section",$e,[(m(!0),y(st,null,at(e(o),(h,_)=>(m(),A(u,N({key:`basket-coin-${_}`,class:"col-span-1"},{basketCoin:h}),null,16))),128))]))]),_:1},16,["class"])])])}}});function Ae(r,n){wt(2,arguments);var o=St(n);return Xt(r,o*1e3)}function mt(r,n){wt(2,arguments);var o=St(n);return Ae(r,-o)}function Ie(r){let n,o=r[0],i=1;for(;i<r.length;){const c=r[i],d=r[i+1];if(i+=2,(c==="optionalAccess"||c==="optionalCall")&&o==null)return;c==="access"||c==="optionalAccess"?(n=o,o=d(o)):(c==="call"||c==="optionalCall")&&(o=d((...u)=>o.call(n,...u)),n=void 0)}return o}const Se={key:0,class:"flex items-start justify-between"},we={class:"flex items-center"},Ce={class:"text-gradient text-lg font-semibold"},Te={key:0},Me={class:"tracking-1 mt-px text-xs font-bold uppercase text-gray-400 dark:text-gray-500"},Pe={class:"tracking-1 text-right text-base text-gray-700 dark:text-gray-200"},je={class:"mt-8"},Ne={class:"tracking-0.5 mb-2 text-sm font-bold uppercase text-gray-400 dark:text-gray-500"},Fe={class:"flex flex-col sm:flex-row md:flex-col xl:flex-row"},Ee={class:"xl:text-4.5xl xl:leading-14 tracking-0.5 text-3xl text-gray-700 dark:text-gray-200"},Re={class:"text-primary-800 dark:text-primary-500 tracking-1 text-sm uppercase leading-4 sm:ml-3 sm:self-end sm:pb-1 md:ml-0 md:self-start xl:ml-3 xl:self-end xl:pb-3"},qe=t("div",{class:"mb-6 border-b border-gray-300 pt-8 dark:border-gray-600"},null,-1),De=C({__name:"Index",props:{isActive:Boolean,pricePerInj:{type:Number,required:!0}},setup(r){const n=r,o=G(),i=O(),c=s(()=>i.auctionWithTokenAndPrice?i.auctionWithTokenAndPrice.basket:[]),d=s(()=>Ie([i,"access",v=>v.auctionModuleState,"optionalAccess",v=>v.params,"optionalAccess",v=>v.auctionPeriod])?i.auctionModuleState.params.auctionPeriod:604800),u=s(()=>i.auctionModuleState),p=s(()=>c.value.map(b=>{const l=new M(b.amount).multipliedBy(new T(b.price[o.currency.code])),S=new T(n.pricePerInj).gt(0)?l.dividedBy(n.pricePerInj):V;return{...b,amountInCurrency:l.toFixed(),amountInInj:S.toFixed()}})),h=s(()=>p.value.reduce((b,v)=>b.plus(new M(v.amountInInj).toBase(v.token.decimals)),new T(0))),_=s(()=>h.value.eq(0)?"0":h.value.lt(X)?`< ${X.toFormat(j)}`:h.value.toFormat(j)),f=s(()=>p.value.reduce((b,v)=>b.plus(new M(v.amountInCurrency).toBase(v.token.decimals)),new T(0))),k=s(()=>f.value.eq(0)?`${o.currency.symbol}0`:f.value.lt(X)?`< ${X.toFormat(j)}`:`${o.currency.symbol}${f.value.toFormat(j)}`),B=s(()=>u.value?u.value.highestBid?!!u.value.highestBid.bidder:!1:!0),I=s(()=>{if(u.value){const b=new Date(L(Number(u.value.auctionEndingTimestamp))),v=z(mt(b,d.value*2),"MMM dd yyyy HH:mm 'UTC'xxx"),l=z(mt(b,d.value),"MMM dd yyyy HH:mm 'UTC'xxx");return`${v} - ${l}`}}),w=s(()=>{if(u.value){const b=L(u.value.auctionEndingTimestamp);return z(b,"MMM dd yyyy HH:mm 'UTC'xxx")}});return(b,v)=>{const l=Ht("i18n-t"),S=pt,F=Nt,R=Be,q=It;return m(),A(q,{class:""},{default:x(()=>[e(u)?(m(),y("div",Se,[t("div",we,[t("p",Ce,[g(l,{keypath:"auction.common.roundI18nt",tag:"span"},{round:x(()=>[t("span",null,a(e(u).auctionRound),1)]),_:1})]),e(I)?(m(),A(S,{key:0,lg:"",class:"ml-3",tooltip:b.$t("auction.info.auctionRoundTooltip",{range:e(I)})},null,8,["tooltip"])):$("",!0)]),e(w)?(m(),y("div",Te,[g(F,{active:r.isActive,class:"mb-1 justify-end"},{default:x(()=>[t("div",Me,a(r.isActive?b.$t("auction.info.auctionEndsAt"):b.$t("auction.info.auctionEndedOn")),1)]),_:1},8,["active"]),t("div",Pe,a(e(w)),1)])):$("",!0)])):$("",!0),t("div",je,[t("p",Ne,a(r.isActive?b.$t("auction.info.estTotalValue"):b.$t("auction.info.totalValue")),1),t("div",Fe,[t("span",Ee,a(e(_))+" INJ ",1),t("span",Re,a(e(k))+" "+a(e(o).currency.code),1)])]),qe,g(R,W(Q({basketCoins:e(p),rollover:!e(B)&&!r.isActive})),null,16)]),_:1})}}}),He={class:"col-span-1 text-left font-mono xl:hidden"},Oe={class:"tracking-1 col-span-1 text-right font-bold xl:col-span-3 xl:text-left"},Le={class:"col-span-1 text-left font-mono xl:hidden"},Ve={class:"col-span-1 text-right font-mono xl:col-span-4 xl:text-left"},Ue={class:"flex flex-col justify-center"},We={class:"text-gray-950 tracking-0.4 dark:text-gray-200"},Je={class:"text-2xs tracking-0.4 uppercase leading-3 text-gray-400 dark:text-gray-500"},Ge={class:"col-span-1 text-left font-mono xl:hidden"},Ke={class:"col-span-1 text-right xl:col-span-3 xl:text-left"},Ze={key:0,class:"text-xs text-gray-500 dark:text-gray-500"},Ye=["href"],ze={class:"col-span-2 text-right"},Qe=C({__name:"Row",props:{isLatest:Boolean,auction:{required:!0,type:Object}},setup(r){const n=r,o=G(),i=s(()=>n.auction.winner?it(n.auction.winner):""),c=s(()=>`${rt(ot)}/account/${n.auction.winner}/`),d=s(()=>!n.auction||!n.auction.winningBidAmount?Y:new M(n.auction.winningBidAmount).toBase()),u=s(()=>!n.auction||!n.auction.winningBidAmount?Y:new M(n.auction.winningBidAmount).toBase().times(n.auction.injPrice[o.currency.code])),p=s(()=>d.value.eq(0)?"0":d.value.toFormat(j)),h=s(()=>u.value.eq(0)?`${o.currency.symbol}0`:`${o.currency.symbol}${u.value.toFormat(j)}`),_=s(()=>({name:"auction-auction",params:{auction:n.auction.round}}));return(f,k)=>{const B=K,I=ct,w=ft;return m(),A(w,null,{default:x(()=>[t("span",He,a(f.$t("auction.history.auction"))+" # ",1),t("span",Oe,a(f.$t("auction.history.injRound",{round:r.auction.round})),1),t("span",Le,a(f.$t("auction.history.amountBurnt")),1),t("span",Ve,[t("div",Ue,[t("span",We,a(e(p))+" INJ ",1),t("span",Je,a(e(h))+" "+a(e(o).currency.code),1)])]),t("span",Ge,a(f.$t("auction.history.winner")),1),t("span",Ke,[r.isLatest||!e(i)?(m(),y("span",Ze," â€” ")):(m(),y("a",{key:1,href:e(c),target:"_blank",class:"text-gradient font-mono text-xs font-normal"},a(e(i)),9,Ye))]),t("span",ze,[g(I,{class:"text-primary-800 dark:text-primary-500 cursor-pointer text-xs font-semibold uppercase",to:e(_)},{default:x(()=>[g(B,{sm:"",text:"",primary:"",class:"pr-0 xl:pr-2"},{default:x(()=>[H(a(f.$t("auction.history.viewDetail")),1)]),_:1})]),_:1},8,["to"])])]),_:1})}}});function Xe(r){let n,o=r[0],i=1;for(;i<r.length;){const c=r[i],d=r[i+1];if(i+=2,(c==="optionalAccess"||c==="optionalCall")&&o==null)return;c==="access"||c==="optionalAccess"?(n=o,o=d(o)):(c==="call"||c==="optionalCall")&&(o=d((...u)=>o.call(n,...u)),n=void 0)}return o}const tn={class:"flex items-center justify-between"},en={class:"text-xl font-bold text-gray-700 dark:text-gray-200"},nn={class:"mb-6 flex flex-wrap items-center"},on={class:"text-xs uppercase text-gray-400 dark:text-gray-500"},sn={class:"mt-2 flex items-end sm:mt-0"},an={class:"tracking-0.5 text-2xl text-gray-700 dark:text-gray-200"},rn={class:"text-primary-800 dark:text-primary-500 tracking-1 ml-3 pb-1 text-sm uppercase leading-4 xl:self-end"},cn={class:"overflow-y-hidden rounded-2xl"},un={class:"col-span-3"},ln={class:"col-span-4"},dn={class:"col-span-3"},mn=t("span",{class:"col-span-2"},null,-1),pn={key:0,class:"col-span-1 mt-4 text-center"},_n=C({__name:"Index",props:{isMobile:Boolean,auctions:{type:Array,required:!0}},setup(r){const n=r,o=O(),i=G(),c=gt(),d=J(5),u=J(5),p=s(()=>Xe([o,"access",l=>l.auctionModuleState,"optionalAccess",l=>l.auctionRound])||o.latestRound),h=s(()=>{const l=c.tokenUsdPrice(Rt);if(!l)return V;const S=te(l);return new T(S[i.currency.code])}),_=s(()=>[...n.auctions].reverse().map(l=>{const S=h.value,F=new M(l.winningBidAmount||0).toBase(),R=F.gt(0)?F.multipliedBy(S):V;return{...l,highestBidAmount:F.toFixed(),highestBidAmountInCurrency:R.toFixed()}})),f=s(()=>[..._.value].filter(l=>l.winner!==""&&l.round!==o.latestRound)),k=s(()=>f.value.reduce((l,S)=>new T(l).plus(S.highestBidAmountInCurrency),new T(0))),B=s(()=>f.value.reduce((l,S)=>new T(l).plus(S.highestBidAmount),new T(0))),I=s(()=>k.value.eq(0)?"0":zt(k.value.toNumber())),w=s(()=>B.value.eq(0)?"0":B.value.toFormat(0)),b=s(()=>[..._.value].slice(0,u.value));function v(){u.value+d.value>=_.value.length?u.value=_.value.length:u.value=u.value+d.value}return(l,S)=>{const F=pt,R=_t,q=Qe,P=K,U=ht,Z=It;return m(),y("div",{class:$t({"mt-8 lg:hidden":r.isMobile,"mt-8 hidden lg:block":!r.isMobile})},[t("div",null,[t("div",tn,[t("h3",en,a(l.$t("auction.history.title")),1),Ot(l.$slots,"default")])]),g(Z,{class:"mt-6"},{default:x(()=>[t("div",nn,[t("span",on,a(l.$t("auction.history.totalBurned")),1),g(F,{lg:"",class:"ml-5 mr-6",tooltip:l.$t("auction.history.totalBurnedTooltip")},null,8,["tooltip"]),t("div",sn,[t("span",an,a(e(w))+" INJ ",1),t("span",rn,a(e(I))+" "+a(e(i).currency.code),1)])]),t("div",cn,[g(R,{"is-dense":""},{default:x(()=>[t("span",un,a(l.$t("auction.history.auction"))+" #",1),t("span",ln,a(l.$t("auction.history.amountBurnt")),1),t("span",dn,a(l.$t("auction.history.winner")),1),mn]),_:1}),g(U,{"is-dense":""},{default:x(()=>[(m(!0),y(st,null,at(e(b),D=>(m(),A(q,N({key:`auction-history-${D.round}`,class:"col-span-1"},{auction:D,isLatest:e(o).latestRound===D.round},{class:{active:e(p)===D.round}}),null,16,["class"]))),128)),e(u)<e(_).length?(m(),y("div",pn,[g(P,{text:"",sm:"",onClick:et(v,["stop"])},{default:x(()=>[H(a(l.$t("auction.history.showMore")),1)]),_:1},8,["onClick"])])):$("",!0)]),_:1})])]),_:1})],2)}}}),fn={class:"mb-4"},hn={class:"flex items-start justify-between"},gn={class:"tracking-1 mb-4 text-xs font-bold uppercase text-gray-400 dark:text-gray-500"},xn={class:"text-gradient mb-2 text-2xl"},yn={class:"mt-6 w-full text-center"},bn=C({__name:"Timer",props:{isActive:Boolean,timeDifferenceInSeconds:{type:Number,required:!0}},setup(r){const n=r,o=O(),i=xt(),c=yt(),d=s(()=>{if(!o.auctionModuleState||!o.auctionModuleState.params)return 0;const _=o.auctionModuleState.params.auctionPeriod;return(Number(_)-n.timeDifferenceInSeconds)/Number(_)*100}),u=s(()=>Qt({duration:n.timeDifferenceInSeconds}));function p(){c.openModal(tt.WalletConnect)}function h(){c.openModal(tt.AuctionBid)}return(_,f)=>{const k=ee,B=K;return m(),y("div",null,[t("div",fn,[t("div",hn,[t("div",gn,a(_.$t("auction.status.closingIn")),1),t("div",xn,a(e(u)),1)]),g(k,{progress:e(d)},null,8,["progress"])]),t("div",yn,[e(i).isUserWalletConnected?(m(),A(B,{key:0,lg:"",primary:"",class:"w-full",onClick:h},{default:x(()=>[H(a(_.$t("auction.status.placeABid")),1)]),_:1})):(m(),A(B,{key:1,lg:"",primary:"",class:"w-full",onClick:p},{default:x(()=>[H(a(_.$t("wallet.connect")),1)]),_:1}))])])}}}),vn={class:"mt-4 rounded-2xl px-4 py-6"},$n={class:"flex flex-col items-center justify-center"},kn={key:0,class:"mb-1 text-sm text-gray-700 dark:text-gray-200"},Bn=["href"],An={class:"flex items-center text-2xl text-gray-700 dark:text-gray-200"},In={class:"text-primary-800 dark:text-primary-500 tracking-1 h-[14px] text-sm uppercase"},Sn={key:1,class:"tracking-1 mt-3 text-xs font-bold uppercase text-gray-400 dark:text-gray-500"},wn=C({__name:"HighestBidder",props:{isActive:Boolean,bid:{type:Object,default:void 0},pricePerInj:{type:Number,required:!0}},setup(r){const n=r,o=G(),i=O(),c=s(()=>n.bid&&n.bid.bidder?n.bid:i.auctionModuleState&&i.auctionModuleState.highestBid&&i.auctionModuleState.highestBid.bidder?{bidder:i.auctionModuleState.highestBid.bidder,bidAmount:i.auctionModuleState.highestBid.amount,bidTimestamp:0}:{bidder:"",bidAmount:"0",bidTimestamp:0}),d=s(()=>it(c.value.bidder)),u=s(()=>new M(c.value.bidAmount).toBase()),p=s(()=>u.value.eq(0)?"0":u.value.toFormat(j)),h=s(()=>u.value.eq(0)?V:u.value.multipliedBy(n.pricePerInj)),_=s(()=>h.value.eq(0)?`${o.currency.symbol}0`:`${o.currency.symbol}${h.value.toFormat(j)}`),f=s(()=>`${rt(ot)}/account/${c.value.bidder}/`);return(k,B)=>(m(),y("div",vn,[t("div",$n,[e(c).bidder?(m(),y("span",kn,[t("a",{href:e(f),target:"_blank",class:"text-gradient cursor-pointer"},a(e(d)),9,Bn)])):$("",!0),t("div",An,[t("span",null,a(e(p))+" INJ",1)]),t("span",In,a(e(_))+" "+a(e(o).currency.code),1),e(c).bidder?$("",!0):(m(),y("span",Sn,a(k.$t(r.isActive?"auction.biddingHistory.noBidsYet":"auction.biddingHistory.noWinner")),1))])]))}}),Cn={class:"dark:bg-gray-950 h-[72px] rounded-2xl bg-gray-100 px-5 py-4"},Tn={class:"flex h-full items-center justify-between"},Mn={class:"flex flex-col"},Pn={class:"xs:text-sm xs:mb-1 text-xs text-gray-700 dark:text-gray-200"},jn=["href"],Nn={class:"text-2xs xs:text-xs text-gray-500 dark:text-gray-400"},Fn={class:"flex items-center text-gray-700 dark:text-gray-200"},En={class:"xs:text-lg"},Rn=["href"],qn=C({__name:"BiddingHistoryItem",props:{bid:{required:!0,type:Object}},setup(r){const n=r,o=n.bid.bidder?it(n.bid.bidder):"",i=s(()=>new M(n.bid.bidAmount).toBase()),c=s(()=>i.value.eq(0)?"0":i.value.toFormat(j)),d=s(()=>z(new Date(n.bid.bidTimestamp),bt)),u=s(()=>`${rt(ot)}/account/${n.bid.bidder}/`);return(p,h)=>{const _=ut;return m(),y("div",Cn,[t("div",Tn,[t("div",Mn,[t("span",Pn,[H(a(p.$t("auction.biddingHistory.bidPlacedBy"))+" ",1),t("a",{href:e(u),target:"_blank",class:"text-gradient cursor-pointer"},a(e(o)),9,jn)]),t("span",Nn,a(e(d)),1)]),t("div",Fn,[t("span",En,a(e(c))+" INJ",1),t("a",{href:e(u),target:"_blank",class:"xs:p-2 cursor-pointer p-1"},[g(_,{name:"arrow",class:"rotate-135 h-3 w-3"})],8,Rn)])])])}}}),Dn={class:"px-2"},Hn={class:"flex items-center justify-between"},On={class:"tracking-1 text-xs font-bold uppercase text-gray-400 dark:text-gray-500"},Ln={key:0},Vn={class:"flex items-center"},Un={class:"mr-2"},Wn={class:"tracking-1 mt-6 text-xs font-bold uppercase text-gray-400 dark:text-gray-500"},Jn=C({__name:"Index",props:{isActive:Boolean,pricePerInj:{type:Number,required:!0}},setup(r){const n=O(),o=s(()=>n.auction?n.auction.bids:[]),i=s(()=>[...o.value].sort((d,u)=>new T(u.bidAmount).minus(d.bidAmount).toNumber())),c=s(()=>i.value.length>0?i.value[0]:void 0);return(d,u)=>{const p=ut,h=ct,_=wn,f=qn;return m(),y("div",Dn,[t("div",null,[t("div",Hn,[t("div",On,a(d.$t(r.isActive?"auction.biddingHistory.currentHighestBid":"auction.biddingHistory.finalBid")),1),r.isActive?$("",!0):(m(),y("div",Ln,[g(h,{to:{name:"auction-auction"},class:"text-primary-500 hover:text-primary-800 block cursor-pointer text-sm font-semibold lg:hidden"},{default:x(()=>[t("div",Vn,[t("span",Un,a(d.$t("auction.banner.currentAuctionLink")),1),g(p,{name:"arrow",class:"h-5 w-5 rotate-180"})])]),_:1})]))]),g(_,W(Q({isActive:r.isActive,pricePerInj:r.pricePerInj,bid:e(c)})),null,16)]),t("div",null,[t("div",Wn,a(d.$t("auction.biddingHistory.biddingHistory")),1),e(i).length>0?(m(),y("div",{key:0,class:$t(["scroll mt-4 max-h-[440px] overflow-x-hidden pr-1 lg:max-h-[792px]",[e(i).length>5?"overflow-y-scroll":""]])},[g(Lt,{name:"list",tag:"div"},{default:x(()=>[(m(!0),y(st,null,at(e(i),(k,B)=>(m(),A(f,N({key:`bidding-history-item-${k.bidTimestamp}`,class:{"mb-4":B+1!==e(i).length}},{bid:k}),null,16,["class"]))),128))]),_:1})],2)):$("",!0)])])}}}),Gn={class:"mx-auto max-w-7xl"},Kn={class:"relative"},Zn={class:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-5"},Yn={class:"col-span-1 xl:col-span-3"},zn={class:"text-xl font-bold text-gray-700 dark:text-gray-200"},Qn={class:"flex items-center"},Xn={class:"mr-2"},to={class:"col-span-1 mt-2 lg:mt-1 xl:col-span-2"},eo={class:"lg:mt-12"},no=C({__name:"Index",setup(r){const n=Vt(),o=G(),i=vt(),c=O(),d=gt(),{$onError:u}=kt(),p=J(Date.now()),h=J(void 0),_=lt(new nt(dt.Loading)),f=s(()=>{if(c.auction)return c.auctionModuleState}),k=s(()=>c.injPrice?c.injPrice[o.currency.code]?new T(c.injPrice[o.currency.code]).toNumber():V.toNumber():V.toNumber()),B=s(()=>c.pastAuctions&&c.pastAuctions.length>0),I=s(()=>{if(!f.value)return 0;if(f.value.auctionEndingTimestamp){const l=L(f.value.auctionEndingTimestamp);return ne(l,p.value)}return 0}),w=s(()=>n.name!=="auction-auction"||!f.value||!f.value.auctionRound?!1:!(L(f.value.auctionEndingTimestamp)<L(p.value)));Bt(()=>{v()}),Ut(()=>{clearTimeout(h.value)});function b(){if(!f.value)return;const l=6*1e3,S=L(f.value.auctionEndingTimestamp)-L(Date.now())+l;h.value=setTimeout(()=>{v()},S)}function v(){const l=n.params.auction;_.setLoading(),Promise.all([i.fetchBalances(),d.getTokensUsdPriceMap([Wt]),c.fetchAuction(parseInt(l)),c.fetchPastAuctions()]).then(()=>{l||b()}).catch(u).finally(()=>{_.setIdle()})}return Jt(()=>{p.value=Date.now()},1e3),(l,S)=>{const F=De,R=ut,q=ct,P=_n,U=bn,Z=Jn,D=Ct;return m(),y("div",Gn,[t("div",Kn,[g(D,W(Q({status:e(_)})),{default:x(()=>[t("div",null,[t("div",Zn,[t("div",Yn,[t("h3",zn,a(l.$t("auction.info.title")),1),e(f)?(m(),A(F,N({key:0,class:"mt-6"},{isActive:e(w),pricePerInj:e(k)}),null,16)):$("",!0),e(B)?(m(),A(P,W(N({key:1},{auctions:e(c).pastAuctionsWithTokenAndPrice})),{default:x(()=>[e(w)?$("",!0):(m(),A(q,{key:0,to:{name:"auction-auction"},class:"text-primary-500 hover:text-primary-800 hidden cursor-pointer text-sm font-semibold lg:block"},{default:x(()=>[t("div",Qn,[t("span",Xn,a(l.$t("auction.banner.currentAuctionLink")),1),g(R,{name:"arrow",class:"h-5 w-5 rotate-180"})])]),_:1}))]),_:1},16)):$("",!0)]),t("div",to,[t("div",eo,[e(w)?(m(),A(U,N({key:0,class:"mb-6"},{timeDifferenceInSeconds:e(I)}),null,16)):$("",!0),g(Z,W(Q({isActive:e(w),pricePerInj:e(k)})),null,16)]),e(B)?(m(),A(P,N({key:0,"is-mobile":""},{auctions:e(c).pastAuctionsWithTokenAndPrice}),null,16)):$("",!0)])])])]),_:1},16)])])}}}),oo={class:"rounded-lg bg-gray-200 px-4 py-5 text-center dark:bg-gray-900"},so={class:"tracking-1 flex items-center justify-between text-xs text-gray-700 dark:text-gray-200"},ao={class:"font-bold uppercase"},io={class:"font-mono"},ro=t("div",{class:"mb-6 border-b border-gray-300 pt-10 dark:border-gray-600"},null,-1),co={class:"tracking-1 mb-4 text-xs font-bold uppercase text-gray-700 dark:text-gray-200"},uo={class:"w-full text-gray-200"},lo=t("span",{class:"pr-6 font-bold"},"INJ",-1),mo={class:"mt-4 w-full text-center"},po=C({__name:"BidForm",props:{highestBid:{type:Object,required:!0},incrementRate:{type:String,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue","bidState:changed"],setup(r,{emit:n}){const o=r,i=vt(),c=s(()=>new T(i.injectiveBalance)),{valueToString:d,valueWithGasBufferToFixed:u}=Gt(c),p=s(()=>{const I=new M(o.incrementRate).toBase();return o.highestBid.eq(0)?new T("1"):o.highestBid.multipliedBy(I).plus(o.highestBid)}),h=s({get:()=>(k(o.modelValue),o.modelValue),set:I=>{n("update:modelValue",I)}}),{value:_,errors:f,setValue:k}=Kt({name:"amount",initialValue:"",rule:"required|positiveNumber",dynamicRule:s(()=>`injBalance:${p.value},${c.value}`)});function B(){n("bidState:changed",E.Confirm)}return(I,w)=>{const b=jt,v=K;return m(),y("div",null,[t("div",oo,[t("div",so,[t("div",ao,a(I.$t("auction.bid.myInjBalance")),1),t("div",io,a(e(d))+" INJ",1)])]),ro,t("div",co,a(I.$t("auction.bid.myBid")),1),t("div",null,[t("div",uo,[g(b,{modelValue:e(h),"onUpdate:modelValue":w[0]||(w[0]=l=>At(h)?h.value=l:null),errors:e(f),valid:e(f).length===0,max:e(u),placeholder:0,"max-decimals":18,"is-dense":"","error-below":"","error-small":"",lg:"",step:"0.01",min:"0","is-inj-token":""},{addon:x(()=>[lo]),_:1},8,["modelValue","errors","valid","max"])]),$("",!0),t("div",mo,[g(v,{lg:"",class:"w-full",primary:e(f).length===0,disabled:e(f).length!==0||!e(_),onClick:et(B,["stop"])},{default:x(()=>[H(a(I.$t("auction.bid.placeABid")),1)]),_:1},8,["primary","disabled","onClick"])])])])}}}),_o={class:"tracking-0.5 mb-4 text-2xl font-bold text-gray-700 dark:text-gray-200"},fo={class:"tracking-0.5 mb-10 text-sm text-gray-700 dark:text-gray-200"},ho={class:"mt-6 text-center"},go=C({__name:"ConfirmForm",props:{highestBidder:{type:String,required:!0},status:{type:Object,default:()=>new nt}},emits:["confirmed","bidState:changed"],setup(r,{emit:n}){const o=r,i=xt(),c=s(()=>i.injectiveAddress===o.highestBidder);function d(){n("confirmed")}function u(){n("bidState:changed",E.Bid)}return(p,h)=>{const _=K;return m(),y("div",null,[t("div",_o,a(p.$t(e(c)?"auction.bid.confirmHighestBidderHeader":"auction.bid.confirmTitle")),1),t("div",fo,a(p.$t("auction.bid.confirmBody")),1),g(_,{lg:"",class:"w-full bg-accent-200 text-gray-950",status:r.status,onClick:et(d,["stop"])},{default:x(()=>[H(a(p.$t("auction.bid.confirm")),1)]),_:1},8,["status","onClick"]),t("div",ho,[t("span",{class:"tracking-0.5 hover:text-primary-800 dark:hover:text-primary-500 cursor-pointer font-mono text-sm text-gray-700 underline dark:text-gray-200",onClick:u},a(p.$t("auction.bid.goBack")),1)])])}}}),xo={class:"tracking-0.5 mb-4 text-2xl font-bold text-gray-700 dark:text-gray-200"},yo={class:"tracking-0.5 mb-10 text-sm text-gray-700 dark:text-gray-200"},bo=C({__name:"SubmittedForm",props:{closingDate:{type:[String,Number],required:!0}},emits:["confirmed"],setup(r,{emit:n}){const o=r,i=s(()=>z(oe(Number(o.closingDate)),bt));function c(){n("confirmed")}return(d,u)=>{const p=K;return m(),y("div",null,[t("div",xo,a(d.$t("auction.bid.submittedHeader")),1),t("div",yo,a(d.$t("auction.bid.submittedBody",{endingDate:e(i)})),1),g(p,{lg:"",class:"w-full",primary:"",onClick:et(c,["stop"])},{default:x(()=>[H(a(d.$t("auction.bid.ok")),1)]),_:1},8,["onClick"])])}}}),vo={key:0},$o={key:1},ko={key:2},Bo={key:0,class:"relative mt-8"},Ao=C({__name:"Bid",setup(r){const n=O(),o=yt(),{success:i}=Zt(),{t:c}=qt(),{$onError:d}=kt(),u=J(""),p=J(E.Bid),h=lt(new nt(dt.Idle)),_=s(()=>!n.auctionModuleState||!n.auctionModuleState.highestBid||!n.auctionModuleState.highestBid.bidder?"":n.auctionModuleState.highestBid.bidder),f=s(()=>!n.auctionModuleState||!n.auctionModuleState.highestBid||!n.auctionModuleState.highestBid.amount?V:new M(n.auctionModuleState.highestBid.amount).toBase()),k=s(()=>o.modals[tt.AuctionBid]),B=s(()=>p.value===E.Submitted&&n.auctionModuleState),I=s(()=>n.auctionModuleState&&n.auctionModuleState.params),w=s(()=>!n.auctionModuleState||!n.auctionModuleState.params?"":n.auctionModuleState.params.minNextBidIncrementRate),b=s(()=>n.auctionModuleState?n.auctionModuleState.auctionRound:""),v=s(()=>n.auctionModuleState?n.auctionModuleState.auctionEndingTimestamp:"");function l(){u.value="",p.value=E.Bid,o.closeModal(tt.AuctionBid)}function S(){h.setLoading(),n.bid({amount:u.value}).then(()=>{i({title:c("auction.bid.successBid")}),Dt.trackPlaceBidEvent(u.value),p.value=E.Submitted}).catch(P=>{d(P),l()}).finally(()=>{h.setIdle()})}function F(){l()}function R(){l()}function q(P){p.value=P}return(P,U)=>{const Z=po,D=go,Tt=bo,Mt=se;return m(),A(Mt,{"is-open":e(k),sm:"","extra-padding":"","onModal:closed":F},{title:x(()=>[t("h3",null,[e(p)===e(E).Confirm?(m(),y("span",vo,a(P.$t("auction.bid.titleConfirm")),1)):e(B)?(m(),y("span",$o,a(P.$t("auction.common.round",{round:e(b)})),1)):$("",!0),e(p)===e(E).Bid?(m(),y("span",ko,a(P.$t("auction.bid.title")),1)):$("",!0)])]),default:x(()=>[e(I)?(m(),y("div",Bo,[e(p)===e(E).Bid?(m(),A(Z,N({key:0,modelValue:e(u),"onUpdate:modelValue":U[0]||(U[0]=Pt=>At(u)?u.value=Pt:null)},{highestBid:e(f),incrementRate:e(w)},{"onBidState:changed":q}),null,16,["modelValue"])):$("",!0),e(p)===e(E).Confirm?(m(),A(D,N({key:1},{status:e(h),highestBidder:e(_)},{onConfirmed:S,"onBidState:changed":q}),null,16)):$("",!0),e(p)===e(E).Submitted?(m(),A(Tt,N({key:2},{closingDate:e(v)},{onConfirmed:R}),null,16)):$("",!0)])):$("",!0)]),_:1},8,["is-open"])}}}),Io={class:"relative"},ts=C({__name:"[[auction]]",setup(r){const n=O(),o=lt(new nt(dt.Idle));return Bt(()=>{n.streamBids()}),Yt(()=>{n.cancelBidsStream()}),(i,c)=>{const d=no,u=Ao,p=Ct;return m(),y("div",Io,[g(p,W(Q({status:e(o)})),{default:x(()=>[t("div",null,[g(d),g(u)])]),_:1},16)])}}});export{ts as default};
